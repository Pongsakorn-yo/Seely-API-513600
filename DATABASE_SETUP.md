# ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ PostgreSQL Database ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Seely API

## ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°

### 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á PostgreSQL
‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á PostgreSQL ‡∏à‡∏≤‡∏Å: https://www.postgresql.org/download/windows/

**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**
- Username: `postgres` (default)
- Password: ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÑ‡∏î‡πâ (‡πÄ‡∏ä‡πà‡∏ô `postgres`)
- Port: `5432` (default)

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á TablePlus
‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á TablePlus ‡∏à‡∏≤‡∏Å: https://tableplus.com/

---

## ‡∏™‡∏£‡πâ‡∏≤‡∏á Database ‡∏î‡πâ‡∏ß‡∏¢ TablePlus

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ PostgreSQL Server

1. ‡πÄ‡∏õ‡∏¥‡∏î **TablePlus**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Create a new connection"**
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **PostgreSQL**
4. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠:
   ```
   Name: Seely API (‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
   Host: localhost
   Port: 5432
   User: postgres
   Password: postgres
   Database: postgres (‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ default database ‡∏Å‡πà‡∏≠‡∏ô)
   ```
5. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Test"** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
6. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Connect"**

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á Database

1. ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà **"Databases"** ‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Create Database..."**
3. ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ Database: `seely_db`
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Create"**

**‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ SQL Command:**
```sql
CREATE DATABASE seely_db;
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database ‡πÉ‡∏´‡∏°‡πà

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á connection ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô TablePlus
2. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   ```
   Name: Seely API - Database
   Host: localhost
   Port: 5432
   User: postgres
   Password: postgres
   Database: seely_db
   ```
3. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Connect"**

---

## ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ Seely API

### 1. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÑ‡∏ü‡∏•‡πå .env

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:

```env
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/seely_db
```

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö:** `postgresql://[username]:[password]@[host]:[port]/[database]`

‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `postgres:postgres` ‡πÄ‡∏õ‡πá‡∏ô username ‡πÅ‡∏•‡∏∞ password ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

```powershell
npm install
```

### 3. ‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

```powershell
npm run start:dev
```

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å TypeORM ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á tables ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ‡πÉ‡∏ô entities:
- `users` - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- `series` - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡∏µ‡∏£‡∏µ‡∏¢‡πå
- `reviews` - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏µ‡∏ß‡∏¥‡∏ß

### 4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Tables ‡πÉ‡∏ô TablePlus

‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà TablePlus ‡πÅ‡∏•‡∏∞ refresh connection ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô tables ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô

---

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Database Schema

### Table: users
```sql
- id: SERIAL PRIMARY KEY
- username: VARCHAR UNIQUE NOT NULL
- password: VARCHAR NOT NULL (encrypted with bcrypt)
- role: VARCHAR(10) DEFAULT 'USER'
```

### Table: series
```sql
- id: SERIAL PRIMARY KEY
- title: VARCHAR NOT NULL
- year: INTEGER NOT NULL
- reviewDetail: TEXT NOT NULL
- recommenderScore: FLOAT NOT NULL
- ratingCode: VARCHAR(4) NOT NULL
- ownerId: INTEGER NOT NULL (FK -> users.id)
```

### Table: reviews
```sql
- id: SERIAL PRIMARY KEY
- seriesId: INTEGER NOT NULL (FK -> series.id)
- reviewerId: INTEGER NOT NULL (FK -> users.id)
- score: FLOAT NOT NULL (1-5)
- comment: TEXT NULLABLE
- createdAt: TIMESTAMP DEFAULT NOW()
```

---

## ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á SQL ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå

### ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```sql
SELECT * FROM users;
SELECT * FROM series;
SELECT * FROM reviews;
```

### ‡∏î‡∏π‡∏ã‡∏µ‡∏£‡∏µ‡∏¢‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
```sql
SELECT 
  s.*,
  COUNT(r.id) as review_count,
  AVG(r.score) as average_score
FROM series s
LEFT JOIN reviews r ON s.id = r."seriesId"
GROUP BY s.id;
```

### ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏£‡∏∞‡∏ß‡∏±‡∏á!)
```sql
TRUNCATE TABLE reviews CASCADE;
TRUNCATE TABLE series CASCADE;
TRUNCATE TABLE users CASCADE;
```

---

## ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‚ùå Connection refused
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ PostgreSQL service ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ô
- Windows: ‡πÄ‡∏õ‡∏¥‡∏î Services ‡πÅ‡∏•‡∏∞‡∏´‡∏≤ "postgresql-x64-[version]"

### ‚ùå Authentication failed
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö username ‡πÅ‡∏•‡∏∞ password ‡πÉ‡∏ô `.env`
- ‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢ TablePlus ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### ‚ùå Database does not exist
- ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á database `seely_db` ‡πÉ‡∏ô TablePlus ‡∏Å‡πà‡∏≠‡∏ô

### ‚ùå Port 5432 already in use
- ‡∏°‡∏µ PostgreSQL ‡∏´‡∏£‡∏∑‡∏≠ service ‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ä‡πâ port ‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô port ‡πÉ‡∏ô `.env` ‡πÅ‡∏•‡∏∞ connection settings

---

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:

1. ‚úÖ ‡πÉ‡∏ä‡πâ Postman ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API endpoints
2. ‚úÖ ‡∏î‡∏π‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô TablePlus
3. ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SQL queries ‡∏ó‡∏µ‡πà TypeORM generate ‡∏ú‡πà‡∏≤‡∏ô console logs
4. ‚úÖ Backup/Restore database ‡∏ú‡πà‡∏≤‡∏ô TablePlus

---

## Tips

- üîç ‡πÄ‡∏õ‡∏¥‡∏î logging ‡πÉ‡∏ô `data-source.ts` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π SQL queries
- üíæ ‡πÉ‡∏ä‡πâ TablePlus ‡πÉ‡∏ô export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô CSV/JSON
- üîê ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô JWT secrets ‡πÉ‡∏ô `.env` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production
- üìä ‡πÉ‡∏ä‡πâ TablePlus ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏π relationships ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á tables

